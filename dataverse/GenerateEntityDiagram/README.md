
# Use metadata to generate entity diagrams

Visual representation of metadata can be very useful, especially when you're trying to describe the relationship between entities in the system. You can use the Metadata Diagram program to generate entity relationship diagrams. You can create a simple diagram that shows a relationship for just one entity or a complex diagram that includes dozens of related entities, including custom and system entities.

## What this sample does

This sample shows two new custom entities created in Microsoft Dataverse. The first entity represents a bank account and the second entity represents a safe deposit box.

The following entity diagram was generated by using the Metadata Diagram tool. It shows the relationship between the `new_bankaccount` entity, the `new_safedepositbox` entity, and other entities in the system. The names shown are the logical entity names. If there are multiple relationships between the same two entities, only one line is drawn in the diagram for simplicity.

:::image type="content" source="entity-diagram.png" alt-text="Screenshot of the entity diagram generated by this sample.":::

> [!TIP]
> It's important not to list too many entities since the diagram is too hard to read with the many, many connections you might see.

## Prerequisites

1. Download and install Microsoft Visio.
1. Launch the Visual Studio installer and verify that the **Visual Studio Tools for Office** component is installed or install it.

## How to run this sample

You can run the sample in Visual Studio in two different ways with either the default connection string or your own connection string.

## Option 1: Run sample with no changes

1. In File Explorer, select the solution (*.sln) file to launch Visual Studio.
1. Add entity names as command line arguments in one of two ways:
   1. Add entity names to Project Properties, for example you can use `account contact` to represent the entities called `account` and `contact`. These entities are in the default environement in this sample.
   1. Alternatively, you can run a command from the `bin\Debug` folder in the command prompt to include the entity names. This command runs the sample.

      ```cmd
      GenerateEntityDiagram.exe account contact
      ```

1. If you added entity names to Project Properties, you can now run the sample using `Start` in Visual Studio.

1. You see a login popup. Select a deployment type of **Office 365** and check the **Show Advanced** box. Enter your account user name and password. Select **Login**.

   :::image type="content" source="login-popup.png" alt-text="Screenshot that shows the right options selected or entered in the login popup.":::

## Option 2: Run sample with your own connection string and entities

1. Go to `App.config` and uncomment the connection string information.
1. Replace `Username` and `Url` with your account username and environment URL.

   :::image type="content" source="connection-string.png" alt-text="Screenshot that shows the commented out connection string code and where to change the user name and URL.":::

1. Since the environment is changed from the default, you must change the entity names in one of two ways.
   1. You can add your own entity names on the command line when you run the sample. For example, your command should have this structure:

      ```cmd
      GenerateEntityDiagram.exe entity1 entity2
      ```

   1. Alternatively, you can add your entity names to your Project Properties by going to **Property Pages** > **Debug**. Under **Start options** add your entity names in the **Command line arguments** field.
   1. Run the sample.

## Results - a generated diagram

Your first entity name is the name of your generated Visio file. In the default case, the entity name is `account`, so you find the generated diagram called `account.vsd` in your `bin/Debug` folder after running the sample.

For more information, see [Use metadata to generate entity diagram](https://learn.microsoft.com/dynamics365/customer-engagement/developer/use-metadata-generate-entity-diagrams).
